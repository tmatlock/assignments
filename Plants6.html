<!DOCTYPE html>
<html>
    <head>
            <meta charset="utf-8">
            <title>Plan Your Plant Route</title>
            <link rel="icon" type="image/x-icon" href= "C:/Users/17074/OneDrive - University Of Oregon/Desktop/Landscape Architecture/PLANTS/ICONS/HAMAMELIDACEAE.png">
            <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
            <link href="https://api.mapbox.com/mapbox-gl-js/v2.14.1/mapbox-gl.css" rel="stylesheet">
            <script src="https://api.mapbox.com/mapbox-gl-js/v2.14.1/mapbox-gl.js"></script>
            <script src="https://api.mapbox.com/mapbox-gl-js/v2.14.1/mapbox-gl.js"></script>
            <script src="https://npmcdn.com/@turf/turf/turf.min.js"></script>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/mapbox-polyline/1.1.1/polyline.js></script>
            <script src=https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-directions/v4.0.2/mapbox-gl-directions.js></script>
            <link rel="stylesheet" href=https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-directions/v4.0.2/mapbox-gl-directions.css type="text/css" />
        <style>
            body { margin: 0; padding: 0; }
            #map { position: absolute; top: 0; bottom: 0; width: 100%; }
        </style>
    </head>
    
<body>
    
    <style>
        .filter-ctrl {
            position: absolute;
            top: 10px;
            right: 50px;
            z-index: 1;
        }
 
        .filter-ctrl input[type='text'] {
            font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
            width: 100%;
            border: 0;
            background-color: #fff;
            margin: 0;
            color: rgba(0, 0, 0, 0.5);
            padding: 10px;
            box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.1);
            border-radius: 3px;
            width: 180px;
        }
    
        .mapboxgl-popup-close-button{
        display: active}
        new mapbox.GeolocateControl({
            perspective-origin: center
        })
    </style>
    
<div id="map"></div>

<div class="filter-ctrl">
    <input id="filter-input" type="text" name="filter" placeholder="Filter plants by name">
</div>
 
<script>
	mapboxgl.accessToken = 'pk.eyJ1IjoidHJpc3Rhbm1hdGxvY2sxMyIsImEiOiJjbGc1ZmtuejQwMnczM2ZsanY4ZDA3NW1vIn0.4Nm_q4ClJXHqpwGUrGS6sg';
    
  
    const map = new mapboxgl.Map({
        container: 'map', // container ID
        // Choose from Mapbox's core styles, or make your own style with Mapbox Studio
        style: 'mapbox://styles/tristanmatlock13/clidht4y1001a01oc6ael2kh4', // style URL
        projection: 'globe', // Display the map as a globe, since satellite-v9 defaults to Mercator
        zoom: 11, // starting zoom
        center: [-123.0860, 44.0523] // // starting center in [lng, lat]
    });
 map.addControl(
new mapboxgl.GeolocateControl({
positionOptions: {
enableHighAccuracy: true
},
// When active the map will receive updates to the device's location as it changes.
trackUserLocation: true,
// Draw an arrow next to the location dot to indicate which direction the device is heading.
showUserHeading: true
})
);
     
const directions = new MapboxDirections({
  accessToken: mapboxgl.accessToken,
  unit: 'metric',
  profile: 'mapbox/driving',
  alternatives: false,
  geometries: 'geojson',
  controls: { instructions: false },
  flyTo: false
});

map.addControl(directions, 'top-right')

map.on('load', function() {
    
    map.loadImage(
        "https://tmatlock.github.io/assignments/ACERACEAE.png",
            (error, image) => {
            if (error) throw error;
    map.addImage('ACERACEAE', image,);
    map.addSource("Acer_macrophyllum", {
            "type": "geojson",
        'data':"https://tmatlock.github.io/assignments/Acer%20macrophyllum%20-%20bigleaf%20maple.geojson"
    });
    map.addLayer({
        'id': 'Acer_macrophyllum_Layer',
        'type': 'symbol',
        'source': 'Acer_macrophyllum',
        'layout': {
            'icon-image': 'ACERACEAE',
            'icon-size':.04,  
            'icon-allow-overlap' : false,
            },
        "paint": {
            "icon-color": "#ff0000"
        },
        },   
    );
    
    map.loadImage(
        "https://tmatlock.github.io/assignments/HIPPOCASTANEAE.png",
            (error, image) => {
            if (error) throw error;
    map.addImage('HIPPOCASTANEAE', image,);
    map.addSource("Aesculus x carnea", {
        "type": "geojson",
        'data':"https://tmatlock.github.io/assignments/Aesculus%20x%20carnea%20-%20red%20horsechestnut.geojson"
        });
    map.addLayer({
        "id": "Aesculus x carnea_Layer",
        "type": "symbol",
        "source": 'Aesculus x carnea',
        'layout': {
            'icon-image': 'HIPPOCASTANEAE',
            'icon-size':.04,  
            'icon-allow-overlap' : false,
            },
        "paint": {
            "icon-color": "#ff0000"  
        },
    })
    })
                
    map.loadImage(
        "https://tmatlock.github.io/assignments/BETULACEAE.png",
            (error, image) => {
            if (error) throw error;
    map.addImage('BETULACEAE', image,);
    map.addSource("Alnus rhombifolia", {
        "type": "geojson",
        'data':"https://tmatlock.github.io/assignments/Alnus%20rhombifolia%20-%20white%20alder.geojson"
        });
    map.addLayer({
        "id": "Alnus rhombifolia_Layer",
        "type": "symbol",
        "source": 'Alnus rhombifolia',
        'layout': {
            'icon-image': 'BETULACEAE',
            'icon-size':.04,  
            'icon-allow-overlap' : false,
            },
        "paint": {
            "icon-color": "#ff0000"  
        },
    })
    })
                
     map.loadImage(
        "https://tmatlock.github.io/assignments/OLEACEAE.png",
            (error, image) => {
            if (error) throw error;
    map.addImage('OLEACEAE', image,);
    map.addSource("Fraxinus latifolia", {
        "type": "geojson",
        'data':"https://tmatlock.github.io/assignments/Fraxinus%20latifolia%20-%20Oregon%20ash.geojson"
        });
    map.addLayer({
        "id": "Fraxinus latifolia_Layer",
        "type": "symbol",
        "source": 'Fraxinus latifolia',
        'layout': {
            'icon-image': 'OLEACEAE',
            'icon-size':.04,  
            'icon-allow-overlap' : false,
            },
        "paint": {
            "icon-color": "#ff0000"  
        },
    })
    })
                
    map.loadImage(
        "https://tmatlock.github.io/assignments/HAMAMELIDACEAE.png",
            (error, image) => {
            if (error) throw error;
    map.addImage('HAMAMELIDACEAE', image,);
    map.addSource("Liquidambar styraciflua", {
        "type": "geojson",
        'data':"https://tmatlock.github.io/assignments/Liquidambar%20styraciflua%20-%20American%20sweetgum.geojson"
        });
    map.addLayer({
        "id": "Liquidambar styraciflua_Layer",
        "type": "symbol",
        "source": 'Liquidambar styraciflua',
        'layout': {
            'icon-image': 'HAMAMELIDACEAE',
            'icon-size':.04,  
            'icon-allow-overlap' : false,
            },
        "paint": {
            "icon-color": "#ff0000"  
        },
    })
    })
                
    map.loadImage(
        "https://tmatlock.github.io/assignments/PINACEAE.png",
            (error, image) => {
            if (error) throw error;
    map.addImage('PINACEAE', image,);
    map.addSource("Pinus thunbergii", {
        "type": "geojson",
        'data':"https://tmatlock.github.io/assignments/Pinus%20thunbergii%20-%20Japanese%20black%20pine.geojson"
        });
    map.addLayer({
        "id": "Pinus thunbergii_Layer",
        "type": "symbol",
        "source": 'Pinus thunbergii',
        'layout': {
            'icon-image': 'PINACEAE',
            'icon-size':.04,  
            'icon-allow-overlap' : false,
            },
        "paint": {
            "icon-color": "#ff0000"  
        },
    })
    })
                
    map.loadImage(
        "https://tmatlock.github.io/assignments/ANACARDIACEAE.png",
            (error, image) => {
            if (error) throw error;
    map.addImage('ANACARDIACEAE', image,);
    map.addSource("Pistacia chinensis", {
        "type": "geojson",
        'data':"https://tmatlock.github.io/assignments/Pistacia%20chinensis%20-%20Chinese%20pistache.geojson"
        });
    map.addLayer({
        "id": "Pistacia chinensis_Layer",
        "type": "symbol",
        "source": 'Pistacia chinensis',
        'layout': {
            'icon-image': 'ANACARDIACEAE',
            'icon-size':.04,  
            'icon-allow-overlap' : false,
            },
        "paint": {
            "icon-color": "#ff0000"  
        },
    })
    })
                
    map.loadImage(
        "https://tmatlock.github.io/assignments/SALICACEAE.png",
            (error, image) => {
            if (error) throw error;
    map.addImage('SALICACEAE', image,);
    map.addSource("Populus trichocarpa", {
        "type": "geojson",
        'data':"https://tmatlock.github.io/assignments/Populus%20trichocarpa%20-%20black%20cottonwood.geojson"
        });
    map.addLayer({
        "id": "Populus trichocarpa_Layer",
        "type": "symbol",
        "source": 'Populus trichocarpa',
        'layout': {
            'icon-image': 'SALICACEAE',
            'icon-size':.04,  
            'icon-allow-overlap' : false,
            },
        "paint": {
            "icon-color": "#ff0000"  
        },
    })
    })
                
    map.loadImage(
       "https://tmatlock.github.io/assignments/ROSACEAE.png",
            (error, image) => {
            if (error) throw error;
    map.addImage('ROSACEAE', image,);
    map.addSource("Prunus cerasifera", {
        "type": "geojson",
        'data':"https://tmatlock.github.io/assignments/Prunus%20cerasifera%20-%20cherry%20plum.geojson"
        });
    map.addLayer({
        "id": "Prunus cerasifera_Layer",
        "type": "symbol",
        "source": 'Prunus cerasifera',
        'layout': {
            'icon-image': 'ROSACEAE',
            'icon-size':.04,  
            'icon-allow-overlap' : false,
            },
        "paint": {
            "icon-color": "#ff0000"  
        },
    })
    })
                
    map.loadImage(
       "https://tmatlock.github.io/assignments/PINACEAE.png",
            (error, image) => {
            if (error) throw error;
    map.addImage('PINACEAE', image,);
    map.addSource("Pseudotsuga menziesii", {
        "type": "geojson",
        'data':"C:/Users/17074/OneDrive - University Of Oregon/Desktop/Landscape Architecture/2022-23/SPRING/MERSON/FINAL/Pseudotsuga menziesii - Douglas fir.geojson"
        });
    map.addLayer({
        "id": "Pseudotsuga menziesii_Layer",
        "type": "symbol",
        "source": 'Pseudotsuga menziesii',
        'layout': {
            'icon-image': 'PINACEAE',
            'icon-size':.04,  
            'icon-allow-overlap' : false,
            },
        "paint": {
            "icon-color": "#ff0000"  
        },
    })
    })
                
    map.loadImage(
       "https://tmatlock.github.io/assignments/FAGACEAE.png",
            (error, image) => {
            if (error) throw error;
    map.addImage('FAGACEAE', image,);
    map.addSource("Quercus garryana", {
        "type": "geojson",
        'data':"https://tmatlock.github.io/assignments/Quercus%20garryana%20-%20Oregon%20white%20oak.geojson"
        });
    map.addLayer({
        "id": "Quercus garryana_Layer",
        "type": "symbol",
        "source": 'Quercus garryana',
        'layout': {
            'icon-image': 'FAGACEAE',
            'icon-size':.04,  
            'icon-allow-overlap' : false,
            },
        "paint": {
            "icon-color": "#ff0000"  
        },
    })
    })
                
    map.loadImage(
       "https://tmatlock.github.io/assignments/CUPRESSACEAE.png",
            (error, image) => {
            if (error) throw error;
    map.addImage('CUPRESSACEAE', image,);
    map.addSource("Sequoiadendron giganteum", {
        "type": "geojson",
        'data':"https://tmatlock.github.io/assignments/Sequoiadendron%20giganteum%20-%20giant%20sequoia.geojson"
        });
    map.addLayer({
        "id": "Sequoiadendron giganteum_Layer",
        "type": "symbol",
        "source": 'Sequoiadendron giganteum',
        'layout': {
            'icon-image': 'CUPRESSACEAE',
            'icon-size':.04,  
            'icon-allow-overlap' : false,
            },
        "paint": {
            "icon-color": "#ff0000"  
        },
    })
    })
                
                
    map.loadImage(
       "https://tmatlock.github.io/assignments/TILIACEAE_1.png",
            (error, image) => {
            if (error) throw error;
    map.addImage('TILIACEAE', image,);
    map.addSource("Tilia cordata", {
        "type": "geojson",
        'data':"https://tmatlock.github.io/assignments/Tilia%20cordata%20-%20littleleaf%20linden.geojson"
        });
    map.addLayer({
        "id": "Tilia cordata_Layer",
        "type": "symbol",
        "source": 'Tilia cordata',
        'layout': {
            'icon-image': 'TILIACEAE',
            'icon-size':.04,  
            'icon-allow-overlap' : false,
            },
        "paint": {
            "icon-color": "#ff0000"  
        },
    })
    })
                
                
    map.loadImage(
       "https://tmatlock.github.io/assignments/ULMACEAE.png",
            (error, image) => {
            if (error) throw error;
    map.addImage('ULMACEAE', image,);
    map.addSource("Ulmus americana", {
        "type": "geojson",
        'data':"https://tmatlock.github.io/assignments/Ulmus%20americana%20-%20American%20elm.geojson"
        });
    map.addLayer({
        "id": "Ulmus americana_Layer",
        "type": "symbol",
        "source": 'Ulmus americana',
        'layout': {
            'icon-image': 'ULMACEAE',
            'icon-size':.04,  
            'icon-allow-overlap' : false,
            },
        "paint": {
            "icon-color": "#ff0000"  
        },
    })
    })
})
    
        var Acer_macrophyllum_content = '<h2>Acer macrophyllum<h2><h3>Bigleaf Maple<h3><h4>Aceracea<h4>';
        Acer_macrophyllum_content += '<img class = "popupImage" src = "https://tmatlock.github.io/assignments/acma498A_0.jpg" width ="200px">'
        Acer_macrophyllum_content += 'Source:<a href="https://landscapeplants.oregonstate.edu/plants/acer-macrophyllum" target="_blank">OSU Plant Database</a>';
    map.on('click', 'Acer_macrophyllum_Layer', (e) => {
        var Acer_macrophyllum_popup = new mapboxgl.Popup()
        .setLngLat(e.lngLat)
        .setHTML(Acer_macrophyllum_content)
        .addTo(map);
    });
    
     var Aesculus_x_carnea_content = '<h2>Aesculus x carnea<h2><h3>Horsechestnut<h3><h4>Hippocastaneae<h4>';
        Aesculus_x_carnea_content += '<img class = "popupImage" src = "https://tmatlock.github.io/assignments/aeca24_0.jpg" width ="200px">'
        Aesculus_x_carnea_content += 'Source:<a href="https://landscapeplants.oregonstate.edu/plants/aesculus-carnea" target="_blank">OSU Plant Database</a>';
    map.on('click', 'Aesculus x carnea_Layer', (e) => {
        var Aesculus_x_carnea_popup = new mapboxgl.Popup()
        .setLngLat(e.lngLat)
        .setHTML(Aesculus_x_carnea_content)
        .addTo(map);
    });
      var Alnus_rhombifolia_content = '<h2>Alnus rhombifolia<h2><h3>White Alder<h3><h4>Betulaceae<h4>';
        Alnus_rhombifolia_content += '<img class = "popupImage" src = "https://tmatlock.github.io/assignments/alrho5071.jpg" width ="200px">'
        Alnus_rhombifolia_content += 'Source:<a href="https://landscapeplants.oregonstate.edu/plants/alnus-rhombifolia" target="_blank">OSU Plant Database</a>';
    map.on('click', 'Alnus rhombifolia_Layer', (e) => {
        var Alnus_rhombifolia_popup = new mapboxgl.Popup()
        .setLngLat(e.lngLat)
        .setHTML(Alnus_rhombifolia_content)
        .addTo(map);
    });
    
     var Fraxinus_latifolia_content = '<h2>Fraxinus latifolia<h2><h3>Oregon Ash<h3><h4>Oleaceae<h4>';
        Fraxinus_latifolia_content += '<img class = "popupImage" src = "https://tmatlock.github.io/assignments/frla49.jpg" width ="200px">'
        Fraxinus_latifolia_content += 'Source:<a href="https://landscapeplants.oregonstate.edu/plants/fraxinus-latifolia" target="_blank">OSU Plant Database</a>';
    map.on('click', 'Fraxinus latifolia_Layer', (e) => {
        var Fraxinus_latifolia_popup = new mapboxgl.Popup()
        .setLngLat(e.lngLat)
        .setHTML(Fraxinus_latifolia_content)
        .addTo(map);
    });
    var Liquidambar_styraciflua_content = '<h2>Liquidambar styraciflua<h2><h3>American Sweetgum<h3><h4>Hamamelidaceae<h4>';
        Liquidambar_styraciflua_content += '<img class = "popupImage" src = "https://tmatlock.github.io/assignments/list55.jpg" width ="200px">'
        Liquidambar_styraciflua_content += 'Source:<a href="https://landscapeplants.oregonstate.edu/plants/liquidambar-styraciflua" target="_blank">OSU Plant Database</a>';
    map.on('click', 'Liquidambar styraciflua_Layer', (e) => {
        var Liquidambar_styraciflua_popup = new mapboxgl.Popup()
        .setLngLat(e.lngLat)
        .setHTML(Liquidambar_styraciflua_content)
        .addTo(map);
    });
    
      var Pinus_thunbergii_content = '<h2>Pinus thunbergii<h2><h3>Japanese Black Pine<h3><h4>Pinaceae<h4>';
        Pinus_thunbergii_content += '<img class = "popupImage" src = "https://tmatlock.github.io/assignments/pith623.jpg" width ="200px">'
        Pinus_thunbergii_content += 'Source:<a href="https://landscapeplants.oregonstate.edu/plants/pinus-thunbergii" target="_blank">OSU Plant Database</a>';
    map.on('click', 'Pinus thunbergii_Layer', (e) => {
        var Pinus_thunbergii_popup = new mapboxgl.Popup()
        .setLngLat(e.lngLat)
        .setHTML(Pinus_thunbergii_content)
        .addTo(map);
    });
    
     var Pistacia_chinensis_content = '<h2>Pistacia chinensis<h2><h3>Chinese Pistachio<h3><h4>Anacardiaceae<h4>';
        Pistacia_chinensis_content += '<img class = "popupImage" src = "https://tmatlock.github.io/assignments/pichin60_0.jpg" width ="200px">'
        Pistacia_chinensis_content += 'Source:<a href="https://landscapeplants.oregonstate.edu/plants/pistacia-chinensis" target="_blank">OSU Plant Database</a>';
    map.on('click', 'Pistacia chinensis_Layer', (e) => {
        var Pistacia_chinensis_popup = new mapboxgl.Popup()
        .setLngLat(e.lngLat)
        .setHTML(Pistacia_chinensis_content)
        .addTo(map);
    });
    
     var Populus_trichocarpa_content = '<h2>Populus trichocarpa<h2><h3>Black Cottonwood<h3><h4>Salicaceae<h4>';
        Populus_trichocarpa_content += '<img class = "popupImage" src = "https://tmatlock.github.io/assignments/potri7_0.jpg" width ="200px">'
        Populus_trichocarpa_content += 'Source:<a href="https://landscapeplants.oregonstate.edu/plants/populus-trichocarpa" target="_blank">OSU Plant Database</a>';
    map.on('click', 'Populus trichocarpa_Layer', (e) => {
        var Populus_trichocarpa_popup = new mapboxgl.Popup()
        .setLngLat(e.lngLat)
        .setHTML(Populus_trichocarpa_content)
        .addTo(map);
    });
    
       var Prunus_cerasifera_content = '<h2>Prunus cerasifera<h2><h3>Flowering Plum<h3><h4>Rosaceae<h4>';
        Prunus_cerasifera_content += '<img class = "popupImage" src = "https://tmatlock.github.io/assignments/prcea2847.jpg" width ="200px">'
        Prunus_cerasifera_content += 'Source:<a href="https://landscapeplants.oregonstate.edu/plants/prunus-cerasifera-atropurpurea" target="_blank">OSU Plant Database</a>';
    map.on('click', 'Prunus cerasifera_Layer', (e) => {
        var Prunus_cerasifera_popup = new mapboxgl.Popup()
        .setLngLat(e.lngLat)
        .setHTML(Prunus_cerasifera_content)
        .addTo(map);
    });
    
      var Pseudotsuga_menziesii_content = '<h2>Pseudotsuga menziesii<h2><h3>Douglas Fir<h3><h4>Pinaceae<h4>';
        Pseudotsuga_menziesii_content += '<img class = "popupImage" src = "https://tmatlock.github.io/assignments/psme0936.jpg" width ="200px">'
        Pseudotsuga_menziesii_content += 'Source:<a href="https://landscapeplants.oregonstate.edu/plants/pseudotsuga-menziesii" target="_blank">OSU Plant Database</a>';
    map.on('click', 'Pseudotsuga menziesii_Layer', (e) => {
        var Pseudotsuga_menziesii_popup = new mapboxgl.Popup()
        .setLngLat(e.lngLat)
        .setHTML(Pseudotsuga_menziesii_content)
        .addTo(map);
    });
    
      var Quercus_garryana_content = '<h2>Quercus garryana<h2><h3>White Oak<h3><h4>Fagaceae<h4>';
        Quercus_garryana_content += '<img class = "popupImage" src = "https://tmatlock.github.io/assignments/quga999A.jpg" width ="200px">'
        Quercus_garryana_content += 'Source:<a href="https://landscapeplants.oregonstate.edu/plants/quercus-garryana" target="_blank">OSU Plant Database</a>';
    map.on('click', 'Quercus garryana_Layer', (e) => {
        var Quercus_garryana_popup = new mapboxgl.Popup()
        .setLngLat(e.lngLat)
        .setHTML(Quercus_garryana_content)
        .addTo(map);
    });
    
    
    var Sequoiadendron_giganteum_content = '<h2>Sequoiadendron giganteum<h2><h3>Giant Sequoia<h3><h4>Cupressaceae<h4>';
        Sequoiadendron_giganteum_content += '<img class = "popupImage" src = "https://tmatlock.github.io/assignments/segi74_0.jpg" width ="200px">'
        Sequoiadendron_giganteum_content += 'Source:<a href="https://landscapeplants.oregonstate.edu/plants/sequoiadendron-giganteum" target="_blank">OSU Plant Database</a>';
    map.on('click', 'Sequoiadendron giganteum_Layer', (e) => {
        var Sequoiadendron_giganteum_popup = new mapboxgl.Popup()
        .setLngLat(e.lngLat)
        .setHTML(Sequoiadendron_giganteum_content)
        .addTo(map);
    });
    
    
      var Tilia_cordata_content = '<h2>Tilia cordata<h2><h3>Littleleaf Linden<h3><h4>Tiliaceae<h4>';
        Tilia_cordata_content += '<img class = "popupImage" src = "https://tmatlock.github.io/assignments/tico9332B.jpg" width ="200px">'
        Tilia_cordata_content += 'Source:<a href="https://landscapeplants.oregonstate.edu/plants/tilia-cordata" target="_blank">OSU Plant Database</a>';
    map.on('click', 'Tilia cordata_Layer', (e) => {
        var Tilia_cordata_popup = new mapboxgl.Popup()
        .setLngLat(e.lngLat)
        .setHTML(Tilia_cordata_content)
        .addTo(map);
    });
    
    var Ulmus_americana_content = '<h2>Ulmus americana<h2><h3>American Elm<h3><h4>Ulmaceae<h4>';
        Ulmus_americana_content += '<img class = "popupImage" src = "https://tmatlock.github.io/assignments/ulam2767.jpg" width ="200px">'
        Ulmus_americana_content += 'Source:<a href="https://landscapeplants.oregonstate.edu/plants/ulmus-americana" target="_blank">OSU Plant Database</a>';
    map.on('click', 'Ulmus americana_Layer', (e) => {
        var Ulmus_americana_popup = new mapboxgl.Popup()
        .setLngLat(e.lngLat)
        .setHTML(Ulmus_americana_content)
        .addTo(map);
    });
})
 var layerIDs = [];
            // Looking at textbox and storing input into a variable.
            var filterInput = document.getElementById('filter-input');
            //Add a GeoJSON source containing place coordinates and information.
            map.on('load', function() {
                map.addSource('places', Acer_macrophyllum);
                geoJsonData.data.features.forEach(function(feature) {
                    var symbol = feature.properties['icon'];
                    var name = feature.properties['name'];
                    var layerID = "poi_" + name.toLowerCase();

                  if (!map.getLayer(layerID)) {

                  //Add layer to render icon
                  map.addLayer({
                    id: layerID,
                    type: 'symbol',
                    source: 'places',
                    layout:{
                        'icon-image': "poi_" + symbol,
                        "icon-size": 1,
                        "text-field": "{name}",
                        "icon-allow-overlap" : true,
                        "text-allow-overlap": true,
                        "text-font": ["Roboto Regular"],
                        "text-anchor": "top",
                        "text-offset": [0,1],
                        "text-padding": 20,
                        "text-size": 10
                        },
                    "filter": ["==", ["get", "name"], name ]
                    });

                    //Push the icon to an empty array.
                    layerIDs.push(layerID);
                }

                    // Monitor the textbox. If the input value matches a layerID,
                    // the visibility will be set to 'visible.'
                    filterInput.addEventListener('keyup', function(e){
                      var value = e.target.value.trim().toLowerCase();
                      layerIDs.forEach(function(layerID){
                        map.setLayoutProperty(
                          layerID,
                          'visibility',
                          layerID.indexOf(value) > -1 ? 'visible' : 'none'
                          );
                      })
                    })
                  });
                });
    
     Acer_macrophyllum_Layer.features.forEach(function (feature) {
         var symbol = feature.properties['icon']; // get the value from the 'icon' field in the data
         var layerID = 'poi-' + symbol;
    var input = document.createElement('input');
                    input.type = 'text';
                   input.id = layerID;
                     input.checked = true;
                     filterGroup.appendChild(input);

                    var label = document.createElement('label');
                    label.setAttribute('for', layerID);
                     label.textContent = symbol;
                     filterGroup.appendChild(label);

     //                // When the checkbox changes, update the visibility of the layer.
                     input.addEventListener('change', function (e) {
                        map.setLayoutProperty(
                             layerID,
                             'visibility',
                            e.target.checked ? 'visible' : 'none'
                         );
                     });
     })
    function calculateRoute(geomFrom, geomTo) {

  var lngFrom = geomFrom.geometry.coordinates[0]
  var latFrom = geomFrom.geometry.coordinates[1]

  var lngTo = geomTo.geometry.coordinates[0]  
  var latTo = geomTo.geometry.coordinates[1]

  $.get('https://api.mapbox.com/directions/v5/mapbox/cycling/' + lngFrom + ',' + latFrom + ';' + lngTo + ',' + latTo + '?access_token=pk.eyJ1IjoicHJheWVyIiwiYSI6ImI3OGRjZjcyY2JiZTUzODMwZWUxZDdiNjRiMWE4NjI5In0.zETX-x6-XPpAv3zt4MiFwg', 
    function( data ) {
    var coords = polyline.decode(data.routes[0].geometry);

    var line = L.polyline(coords).addTo(map);

  });  
};
</script>
 
</body>
</html>